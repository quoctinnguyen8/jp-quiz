import{_ as V,u as F,a as K,c as _,r as h,o as R,b as i,d as e,t as l,e as Q,n as I,F as q,f as A,g as f,h as P,i as c,j as T,k as j}from"./index-DliNXFAJ.js";const E={class:"quiz-container"},G={class:"quiz-header"},O={class:"quiz-info"},U={class:"quiz-title"},J={class:"progress-info"},W={class:"progress-bar"},X={class:"quiz-main"},Y={key:0,class:"loading-state"},Z={key:1,class:"quiz-content"},ee={class:"question-card"},se={class:"question-number"},te=["innerHTML"],le={class:"options-container"},oe=["onClick"],ne={class:"option-label"},ae={class:"option-text"},ue={class:"quiz-actions"},ie=["disabled"],ce={key:2,class:"results-container"},re={class:"results-header"},ve={class:"score-display"},de={class:"score-number"},_e={class:"results-title"},he={class:"results-details"},ge={class:"result-header"},pe={class:"question-number"},me={class:"result-status"},fe=["innerHTML"],be={class:"result-answers"},ze={class:"answer-row"},ke={class:"user-answer"},ye={class:"answer-row"},we={class:"correct-answer"},Ce={key:0,class:"explanation"},Qe={key:3,class:"no-questions"},qe={__name:"Quiz",setup(Ae){const L=K(),x=P(),g=F(),v=L.params.level,d=_(()=>g.selectedQuiz),S=h(!1),o=h(0),a=h([]),p=h(!1),t=h([]),k=_(()=>t.value[o.value]),B=_(()=>t.value.length>0?o.value/t.value.length*100:0),y=_(()=>a.value.length===t.value.length&&a.value.every(n=>n!=null)),m=_(()=>a.value.reduce((n,u,s)=>n+(u===t.value[s]?.correctAnswer?1:0),0)),w=()=>{console.log("Loading questions for level:",v),console.log("Store quiz data:",g.quizData.length,"total questions");const n=g.getQuizByLevel(v);n.length>0?(t.value=n,b(),console.log(`Loaded ${n.length} questions for level ${v}`)):console.error(`No questions found for level ${v} in store`)},b=()=>{a.value=new Array(t.value.length).fill(null)},z=(n,u=null)=>{const s=u||k.value;if(!s)return"";const r=`option${n}`;return(s[r]||"").replace(/^[A-D]\.\s*/,"")},H=n=>{a.value[o.value]=n},M=()=>{o.value<t.value.length-1&&o.value++},N=()=>{o.value>0&&o.value--},$=()=>{y.value&&(p.value=!0)},D=()=>{o.value=0,p.value=!1,b()},C=()=>{g.clearSelectedQuiz(),x.push("/")};return R(()=>{console.log("Quiz page mounted for level:",v),console.log("Selected quiz from store:",d.value?.length||0,"questions"),d.value&&Array.isArray(d.value)&&d.value.length>0?(t.value=d.value,b(),console.log("Using quiz data from store")):w()}),(n,u)=>(c(),i("div",E,[e("header",G,[e("button",{onClick:C,class:"back-button"}," ‚Üê Quay l·∫°i "),e("div",O,[e("h1",U,"Quiz "+l(Q(v)),1),e("div",J,[e("span",null,"C√¢u "+l(o.value+1)+"/"+l(t.value.length),1),e("div",W,[e("div",{class:"progress-fill",style:I({width:B.value+"%"})},null,4)])])])]),e("main",X,[S.value?(c(),i("div",Y,u[0]||(u[0]=[e("div",{class:"loading-spinner"},[e("div",{class:"spinner"}),e("p",null,"ƒêang t·∫£i c√¢u h·ªèi...")],-1)]))):!p.value&&t.value.length>0?(c(),i("div",Z,[e("div",ee,[e("div",se," C√¢u "+l(o.value+1),1),e("div",{class:"question-text",innerHTML:k.value.question},null,8,te),e("div",le,[(c(),i(q,null,A(["A","B","C","D"],s=>e("div",{key:s,class:T(["option-item",{selected:a.value[o.value]===s}]),onClick:r=>H(s)},[e("div",ne,l(s),1),e("div",ae,l(z(s)),1)],10,oe)),64))]),e("div",ue,[o.value>0?(c(),i("button",{key:0,onClick:N,class:"nav-button prev-button"}," ‚Üê C√¢u tr∆∞·ªõc ")):f("",!0),o.value<t.value.length-1?(c(),i("button",{key:1,onClick:M,class:"nav-button next-button"}," C√¢u ti·∫øp ‚Üí ")):f("",!0),o.value===t.value.length-1?(c(),i("button",{key:2,onClick:$,class:"submit-button",disabled:!y.value}," Ho√†n th√†nh ",8,ie)):f("",!0)])])])):p.value?(c(),i("div",ce,[e("div",re,[e("div",ve,[e("div",de,l(m.value)+"/"+l(t.value.length),1)]),e("h2",_e,l(m.value===t.value.length?"Ho√†n h·∫£o!":m.value>=t.value.length*.8?"T·ªët l·∫Øm!":m.value>=t.value.length*.6?"Kh√° t·ªët!":"C·∫ßn c·ªë g·∫Øng th√™m!"),1)]),e("div",he,[(c(!0),i(q,null,A(t.value,(s,r)=>(c(),i("div",{key:s.id,class:T(["result-item",{correct:a.value[r]===s.correctAnswer,incorrect:a.value[r]!==s.correctAnswer}])},[e("div",ge,[e("span",pe,"C√¢u "+l(r+1),1),e("span",me,l(a.value[r]===s.correctAnswer?"‚úì ƒê√∫ng":"‚úó Sai"),1)]),e("div",{class:"result-question",innerHTML:s.question},null,8,fe),e("div",be,[e("div",ze,[u[1]||(u[1]=e("strong",null,"B·∫°n ch·ªçn:",-1)),e("span",ke,l(a.value[r])+" - "+l(z(a.value[r],s)),1)]),e("div",ye,[u[2]||(u[2]=e("strong",null,"ƒê√°p √°n ƒë√∫ng:",-1)),e("span",we,l(s.correctAnswer)+" - "+l(z(s.correctAnswer,s)),1)])]),s.explanation&&a.value[r]!==s.correctAnswer?(c(),i("div",Ce,[u[3]||(u[3]=e("strong",null,"Gi·∫£i th√≠ch:",-1)),j(" "+l(s.explanation),1)])):f("",!0)],2))),128))]),e("div",{class:"results-actions"},[e("button",{onClick:D,class:"retry-button"}," L√†m l·∫°i "),e("button",{onClick:C,class:"home-button"}," V·ªÅ trang ch·ªß ")])])):(c(),i("div",Qe,[e("p",null,"Kh√¥ng t√¨m th·∫•y c√¢u h·ªèi cho level "+l(Q(v)),1),e("button",{onClick:w,class:"load-sample-button"}," üîÑ T·∫£i l·∫°i c√¢u h·ªèi ")]))])]))}},xe=V(qe,[["__scopeId","data-v-158228ed"]]);export{xe as default};
